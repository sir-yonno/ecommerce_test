{"ast":null,"code":"var _jsxFileName = \"/home/yonno/Documents/Projects/TW/Prova/mern-test/frontend/src/screens/OrderHistoryScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useReducer } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Helmet } from \"react-helmet-async\";\nimport { useNavigate } from \"react-router-dom\";\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        order: action.payload,\n        loading: false\n      };\n\n    case 'FETCH_FAILURE':\n      return { ...state,\n        error: action.payload,\n        loading: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function OrderHistoryScreen() {\n  _s();\n\n  const {\n    state\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  const navigate = useNavigate();\n  const [{\n    loading,\n    error,\n    orders\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: ''\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({\n        type: 'FETCH_REQUEST'\n      });\n\n      try {\n        const request = await fetch('/api/orders/mine', {\n          method: 'GET',\n          hearders: new Headers({\n            authorization: `Bearer ${userInfo.token}`\n          })\n        });\n        const data = await request.json();\n        if (!request.ok) throw new Error(data.message);\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAILURE',\n          payload: getError(err)\n        });\n      }\n    };\n\n    fetchData();\n  }, [userInfo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Order History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-3\",\n      children: \"Order History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"DATE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"TOTAL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"PAID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"DELIVERED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ACTION\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: orders.map(order => {\n          /*#__PURE__*/\n          _jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: order._id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.createdAt.substring(0, 10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.totalPrice.toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.isPaid ? order.paidAt.substring(0, 10) : 'No'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: order.isDelivered ? order.deliveredAt.substring(0, 10) : 'No'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                variant: \"light\",\n                onClick: () => {\n                  navigate(`/order/${order._id}`);\n                },\n                children: \"Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, order._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderHistoryScreen, \"rFBLzx2TRytzEAk+37zWd8IIYmA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = OrderHistoryScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderHistoryScreen\");","map":{"version":3,"names":["React","useContext","useEffect","useReducer","Button","Helmet","useNavigate","LoadingBox","MessageBox","Store","getError","reducer","state","action","type","loading","order","payload","error","OrderHistoryScreen","userInfo","navigate","orders","dispatch","fetchData","request","fetch","method","hearders","Headers","authorization","token","data","json","ok","Error","message","err","map","_id","createdAt","substring","totalPrice","toFixed","isPaid","paidAt","isDelivered","deliveredAt"],"sources":["/home/yonno/Documents/Projects/TW/Prova/mern-test/frontend/src/screens/OrderHistoryScreen.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Helmet } from \"react-helmet-async\";\nimport { useNavigate } from \"react-router-dom\";\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\n\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return { ...state, order: action.payload, loading: false };\n    case 'FETCH_FAILURE':\n      return { ...state, error: action.payload, loading: false };\n    default:\n      return state;\n  }\n}\n\nexport default function OrderHistoryScreen() {\n\n  const { state } = useContext(Store);\n  const { userInfo } = state;\n  const navigate = useNavigate();\n\n  const [{ loading, error, orders }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: '',\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_REQUEST' });\n      try {\n        const request = await fetch('/api/orders/mine', {\n          method: 'GET',\n          hearders: new Headers({ authorization: `Bearer ${userInfo.token}` })\n        });\n        const data = await request.json();\n\n        if (!request.ok)\n          throw new Error(data.message);\n\n        dispatch({ type: 'FETCH_SUCCESS', payload: data });\n      } catch (err) {\n        dispatch({ type: 'FETCH_FAILURE', payload: getError(err) });\n      }\n    }\n    fetchData();\n  }, [userInfo])\n\n  return (\n    <div>\n      <Helmet>\n        <title>Order History</title>\n      </Helmet>\n      <h1 className=\"my-3\">Order History</h1>\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant='danger'>{error}</MessageBox>\n      ) : (\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>DATE</th>\n              <th>TOTAL</th>\n              <th>PAID</th>\n              <th>DELIVERED</th>\n              <th>ACTION</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => {\n              <tr key={order._id}>\n                <td>{order._id}</td>\n                <td>{order.createdAt.substring(0, 10)}</td>\n                <td>{order.totalPrice.toFixed(2)}</td>\n                <td>{order.isPaid ? order.paidAt.substring(0, 10) : 'No'}</td>\n                <td>{order.isDelivered ? order.deliveredAt.substring(0, 10) : 'No'}</td>\n                <td>\n                  <Button\n                    type='button'\n                    variant='light'\n                    onClick={() => {\n                      navigate(`/order/${order._id}`)\n                    }}\n                  >\n                    Details\n                  </Button>\n                </td>\n              </tr>\n\n            })}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}